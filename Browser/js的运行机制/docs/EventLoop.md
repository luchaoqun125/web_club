### Event Loop的js代码执行
- JS分为同步任务和异步任务
- 同步任务都在主线程上执行，形成一个执行栈
- 主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放置一个事件。
- 一旦执行栈中的所有同步任务执行完毕（此时JS引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行。

![Image text](../imgs/event.png)

### 事件循环机制
- 主线程运行时会产生执行栈，栈中的代码调用某些api时，它们会在事件队列中添加各种事件
- 而栈中的代码执行完毕，就会读取事件队列中的事件，去执行那些回调
- 如此循环
- 注意，总是要等待栈中的代码执行完毕后才会去读取事件队列中的事件

![Image text](../imgs/xunhuan.png)

### 定时器
- 它是由定时器线程控制，因为JavaScript引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确，因此很有必要单独开一个线程用来计时
- 当使用setTimeout或setInterval时，它需要定时器线程计时，计时完成后就会将特定的事件推入事件队列中。

> 注意：W3C在HTML标准中规定，规定要求setTimeout中低于4ms的时间间隔算为4ms。

### 事件循环进阶：macrotask与microtask
